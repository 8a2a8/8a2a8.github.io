---
title: 数据库知识积累
date: 2024-03-15 12:31:37 +/-TTTT
categories: [database]
tags: [nosql, sql]
---
# 文档目的
- 数据库方向知识的整理归纳文档

# 什么是 NoSQL 数据库？
- NoSQL数据库应该如何定义，不同的SQL操作形式？还是底层组织架构的不同？
- 无论哪种方式，大多数人都同意 NoSQL 数据库以更自然、更灵活的方式存储数据。
- 与 SQL 相反，NoSQL 是一种数据库管理方法，而 SQL 只是一种查询语言，类似于 NoSQL 数据库的查询语言
- 目前四大NoSQL数据库类型分别是：文档数据库、键值数据库、宽列存储和图形数据库

# 文档数据库
- 面向文档的数据库将数据存储在文档中，类似于 JSON （JavaScript Object Notation） 对象。每个文档都包含成对的字段和值。
- 这些值通常可以是多种类型，包括字符串、数字、布尔值、数组甚至其他对象等。文档数据库提供灵活的数据模型，非常适合半结构化和通常非结构化的数据集
- 支持嵌套结构，从而可以轻松表示复杂的关系或分层数据。
- 代表产品：`MongoDB` 数据库和 `Couchbase`
- 典型的底层数据结构：
```json
{
  "_id": "12345",
  "name": "foo bar",
  "email": "foo@bar.com",
  "address": {
    "street": "123 foo street",
    "city": "some city",
    "state": "some state",
    "zip": "123456"
  },
  "hobbies": ["music", "guitar", "reading"]
}
```

# 键值数据库
- 键值存储是一种更简单的数据库类型，其中每个项目都包含键和值
- 每个键都是唯一的，并与单个值相关联
- 它们用于缓存和会话管理，并提供高性能的读取和写入，因为它们倾向于将内容存储在内存中
- 代表产品： `Amazon DynamoDB` 和 `Redis`
- 典型的底层数据结构：
```
Key: user:12345
Value: {"name": "foo bar", "email": "foo@bar.com", "designation": "software developer"}
```
# 宽列存储
- 列存数据库
- 宽列存储将数据存储在表、行和动态列中
- 数据存储在表中。但是，与传统的 SQL 数据库不同，宽列存储非常灵活，其中不同的行可以具有不同的列集。
- 这些数据库可以采用列压缩技术来减少存储空间并提高性能
- 宽行和宽列可以有效地检索稀疏和宽数据
- 代表产品：  `Apache Cassandra` 和 `HBase`
- 比较出名的使用这类数据库的公司或业务：`discord`、`大数据分析`
- 典型的底层数据结构：

|名字|身份证|电子邮件|出生日期|城市
|:-:|:-:|:-:|:-:|:-:|
|Foo酒吧| 12345|foo@bar.com||某城市|
|卡恩·耶鲁|34521|bar@foo.com|12-05-1972 ||

# 图形数据库
- 图形数据库以节点和边的形式存储数据
- 节点通常存储有关人员、地点和事物（如名词）的信息，而 edge 存储有关节点之间关系的信息
- 它们适用于高度互连的数据，其中的关系或模式最初可能不是很明显
- 代表产品：  `Neo4J` 和 `Amazon Neptune`。MongoDB 也提供图遍历能力

# 多模型数据库
- 多模型数据库支持多种类型的 NoSQL 数据模型，因此开发人员可以根据其应用程序需求进行选择
- 这些数据库具有统一的数据库引擎，可以处理数据库实例中的多个数据模型。
- 代表产品： `CosmosDB` 和 `ArangoDB`

# NoSQL 数据库简史
NoSQL 数据库出现在 2000 年代后期，因为存储成本急剧下降。需要创建复杂、难以管理的数据模型以避免数据重复的日子已经一去不复返了。针对开发人员的工作效率进行了优化的 NoSQL 数据库。

随着存储成本的迅速降低，应用程序需要存储和查询的数据量也随之增加。这些数据有各种形状和大小——
结构化、半结构化和非结构化
— 并且提前定义 schema 几乎是不可能的。NoSQL 数据库允许开发人员存储大量非结构化数据，从而为他们提供了很大的灵活性。

在 2000 年代初期，Google 在 BigTable（宽列数据库）上发表了一篇论文，探讨了分布式存储系统的广泛可能性。2009 年，NoSQL 数据库大幅增长，两个关键的面向文档的数据库 MongoDB 和 CouchDB 应运而生。

到 2010 年代，出现了不同类型的 NoSQL 数据库，NoSQL 的接受度越来越高，企业变得更加数据驱动。

此外，敏捷宣言越来越受欢迎，软件工程师正在重新思考他们开发软件的方式。他们必须快速适应不断变化的需求，快速迭代，并在整个软件堆栈（一直到数据库）中进行更改。NoSQL 数据库为他们提供了这种灵活性。

云计算也越来越受欢迎，开发人员开始使用公有云来托管他们的应用程序和数据。他们希望能够在多个服务器和区域之间分发数据，以提高其应用程序的弹性，实现横向扩展而不是纵向扩展，并智能地对数据进行地理定位。一些 NoSQL 数据库，如
MongoDB Atlas
提供这些功能。

由于数字化的指数级增长，企业现在收集了尽可能多的非结构化数据。能够分析和得出可操作性实时洞察从这样的大数据，企业需要超越简单存储的现代解决方案。企业需要一个可以轻松规模,变换和可视化数据;创建控制面板、报告和图表;并与 AI 合作商业智能工具以提高他们的业务生产力。由于其灵活和分布式特性，NoSQL 数据库（例如 MongoDB）在这些任务中大放异彩。

# NoSQL 数据库功能
NoSQL 数据库是灵活、可扩展的分布式数据库。不同类型的 NoSQL 数据库有其独特的功能。
概括地说，NoSQL 数据库通常具有以下功能：
- 分布式计算
- 缩放
- 灵活的架构和丰富的查询语言
- 开发人员易于使用
- 分区容错
- 高可用性

# BASE 合规性
NoSQL 数据库符合 BASE，即 basic availability soft state eventual consistency。基本可用性是指系统容忍部分故障（如节点丢失）的能力。软状态意味着系统允许暂时的不一致，然后最终随着时间的推移自动实现一致性。BASE 合规性可确保高可用性、更快的数据处理、可扩展性和灵活性。但是，MongoDB 也可以配置为提供多文档 ACID 合规性

# 关系数据库与 NoSQL 数据库示例
让我们考虑一个存储有关用户及其爱好的信息的示例。我们需要存储用户的名字、姓氏、手机号码、城市和爱好。

在关系数据库管理系统 （RDBMS） 中，我们可能会创建两个表：一个用于 Users，一个用于 Hobbies。

为了检索有关用户及其爱好的所有信息，需要将 Users 表和 Hobbies 表中的信息联接在一起。

我们为 NoSQL 数据库设计的数据模型将取决于我们选择的 NoSQL 数据库类型。让我们考虑如何将有关用户及其爱好的相同信息存储在
文档数据库
就像 MongoDB 一样。

为了检索有关用户及其爱好的所有信息，可以从数据库中检索单个文档。不需要联接，从而加快查询速度。

# RDBMS 和 NoSQL 数据库之间的差异
关系数据库管理系统和非关系数据库之间存在多种差异。主要区别之一是数据在数据库中的建模方式。下面列出了每个功能的一些主要区别：

## 数据建模
NoSQL：数据模型因使用的 NoSQL 数据库类型（例如键值、文档、图形和宽列）而异，因此该模型适用于半结构化和非结构化数据。

RDBMS：RDBMS 使用表格数据结构，数据表示为一组行和列，使模型适用于结构化数据。

## 图式
NoSQL：它提供了一个灵活的架构，其中每组文档/行-列/键-值对可以包含不同类型的数据。由于灵活性，如果需要，更改架构会更容易。

RDBMS：这是一个固定架构，其中每行都应包含相同的预定义列类型。存储数据后，很难更改架构。

## 查询语言
NoSQL：它根据所使用的 NoSQL 数据库类型而有所不同。例如，MongoDB 具有微量积分，而 Neo4J 使用 Cypher。

RDBMS：这使用结构化查询语言 （SQL）。

## 可扩展性
NoSQL：NoSQL 专为垂直和水平扩展而设计。

RDBMS：RDBMS 专为垂直扩展而设计。但是，它可以扩展水平扩展的有限功能。

## 数据关系
NoSQL：关系可以是嵌套的、显式的或隐式的。

RDBMS：关系通过外键定义，并使用联接进行访问。

## 交易类型
NoSQL：交易符合 BASE 兼容。

RDBMS：交易符合 ACID 标准。

## 性能
NoSQL：NoSQL 适用于实时处理、大数据分析和分布式环境。

RDBMS：RDBMS 适用于读取密集型和事务工作负载。

## 数据一致性
NoSQL：这提供了高数据一致性。

RDBMS：在大多数情况下，这提供了最终的一致性。

## 分布式计算
NoSQL：引入 NoSQL 的主要原因之一是分布式计算，而 NoSQL 数据库通过分片、复制和集群支持分布式数据存储、垂直和水平扩展。

RDBMS：RDBMS 通过集群和复制支持分布式计算。但是，它的可扩展性和灵活性较低，因为它的传统设计并非支持分布式架构。

## 容错
NoSQL：由于数据复制，NoSQL 具有内置的容错能力和高可用性。

RDBMS：RDBMS 使用复制、备份和恢复机制。但是，由于它们是为这些而设计的，因此在应用程序开发过程中可能需要实施其他措施，例如灾难恢复机制。

## 数据分区
NoSQL：它是通过分片和复制完成的。

RDBMS：它支持基于表的分区和分区修剪。


# 数据到对象的映射
NoSQL：NoSQL 以多种方式存储数据，例如，以 JSON 文档、宽列存储或键值对的形式存储数据。它通过 ODM（对象-数据映射）框架提供抽象，以面向对象的方式处理 NoSQL 数据。

RDBMS：RDBMS 更多地依赖于数据到对象的映射，因此数据库列和面向对象的应用程序代码之间存在无缝集成。

# 增量备份
## RDBMS类型数据库
- 这里以MySQL为例

# 参考文献
- [什么是 NoSQL？](https://www.mongodb.com/resources/basics/databases/nosql-explained)
- [了解 SQL 与 NoSQL 数据库](https://www.mongodb.com/resources/basics/databases/nosql-explained/nosql-vs-sql#differences-between-sql-and-nosql)
- [NoSQL 系统可视化指南](https://blog.nahurst.com/visual-guide-to-nosql-systems)
- [NoSQL到底是什么](https://stackoverflow.com/questions/2173082/what-exactly-is-nosql)